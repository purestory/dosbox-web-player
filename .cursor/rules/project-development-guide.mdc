---
description: 
globs: 
alwaysApply: false
---
# DOSBox ì›¹ ì—ë®¬ë ˆì´í„° í”„ë¡œì íŠ¸ ê°œë°œ ê°€ì´ë“œ

## ğŸ¯ **í”„ë¡œì íŠ¸ ëª©í‘œ**
**ìë™ìœ¼ë¡œ ê²Œì„ì´ ì‹¤í–‰ë˜ë„ë¡ ìµœì„ ì˜ ë…¸ë ¥ì„ ë‹¤í•œë‹¤**

## ğŸ“ **í”„ë¡œì íŠ¸ êµ¬ì¡°**

### **Frontend (React + Vite)**
- **ë©”ì¸ ì•±**: [frontend/src/App.tsx](mdc:frontend/src/App.tsx)
- **ê²Œì„ ì„ íƒ**: [frontend/src/components/GameSelector.tsx](mdc:frontend/src/components/GameSelector.tsx)  
- **ì—ë®¬ë ˆì´í„°**: [frontend/src/components/EmulatorJS.tsx](mdc:frontend/src/components/EmulatorJS.tsx)
- **Vite ì„¤ì •**: [frontend/vite.config.ts](mdc:frontend/vite.config.ts)
- **íŒ¨í‚¤ì§€ ì„¤ì •**: [frontend/package.json](mdc:frontend/package.json)

### **DOSBox (unchartedwaters2 ì„œë¸Œëª¨ë“ˆ)**
- **ê²Œì„ ì»´í¬ë„ŒíŠ¸**: [unchartedwaters2/src/components/Game.tsx](mdc:unchartedwaters2/src/components/Game.tsx)
- **DOSBox ìƒì„±**: [unchartedwaters2/src/dos/create-dos.ts](mdc:unchartedwaters2/src/dos/create-dos.ts)
- **íŒŒì¼ ì‹œìŠ¤í…œ**: [unchartedwaters2/src/fs/create-idb-file-system.ts](mdc:unchartedwaters2/src/fs/create-idb-file-system.ts)

### **ê²Œì„ íŒŒì¼**
- **SNES ë¡¬**: [frontend/public/games/](mdc:frontend/public/games)
- **DOS ê²Œì„**: [unchartedwaters2/static/game/](mdc:unchartedwaters2/static/game)

## ğŸš€ **ê°œë°œ ëª…ë ¹ì–´**

### **Frontend (React + Vite)**
```bash
cd frontend

# ê°œë°œ ì„œë²„ ì‹¤í–‰ (ë¹ ë¥¸ ì‹œì‘: ~161ms)
npm run dev

# í”„ë¡œë•ì…˜ ë¹Œë“œ (ë¹ ë¥¸ ë¹Œë“œ: ~632ms)
npm run build

# ë¹Œë“œ ë¯¸ë¦¬ë³´ê¸°
npm run preview

# ì˜ì¡´ì„± ì„¤ì¹˜
npm install
```

### **DOSBox ì„œë¸Œëª¨ë“ˆ**
```bash
cd unchartedwaters2

# ê°œë°œ ì„œë²„ ì‹¤í–‰
npm run dev

# í”„ë¡œë•ì…˜ ë¹Œë“œ
npm run build
```

## âš¡ **ì„±ëŠ¥ ìµœì í™”**

### **1. ë¡œì»¬ ê²Œì„ ìºì‹±**
- **IndexedDB í™œìš©**: ê²Œì„ íŒŒì¼ì„ ë¸Œë¼ìš°ì €ì— ìºì‹±
- **ë¹ ë¥¸ ì¬ë¡œë”©**: ë‘ ë²ˆì§¸ ì‹¤í–‰ë¶€í„° ì´ˆê³ ì† ë¡œë”©
- **ì˜¤í”„ë¼ì¸ ì§€ì›**: ìºì‹œëœ ê²Œì„ì€ ì˜¤í”„ë¼ì¸ ì‹¤í–‰ ê°€ëŠ¥

### **2. Viteì˜ ì¥ì **
- **ê°œë°œ ì„œë²„**: HMRë¡œ ì¦‰ì‹œ ë°˜ì˜
- **ë¹ ë¥¸ ë¹Œë“œ**: ES ëª¨ë“ˆ ê¸°ë°˜ ìµœì í™”
- **ì½”ë“œ ë¶„í• **: í•„ìš”í•œ ë¶€ë¶„ë§Œ ë¡œë“œ

### **3. ê²Œì„ íŒŒì¼ ê´€ë¦¬**
- **ì •ì  íŒŒì¼ ì„œë¹™**: nginxë¥¼ í†µí•œ íš¨ìœ¨ì  ë°°í¬
- **ì••ì¶• ìµœì í™”**: gzip ì••ì¶•ìœ¼ë¡œ ì „ì†¡ ì†ë„ í–¥ìƒ

## ğŸ® **ê²Œì„ ì‹œìŠ¤í…œ**

### **ì§€ì›í•˜ëŠ” ì—ë®¬ë ˆì´í„°**
1. **DOSBox**: DOS ê²Œì„ ì‹¤í–‰ (js-dos ì‚¬ìš©)
2. **EmulatorJS**: ë ˆíŠ¸ë¡œ ì½˜ì†” ê²Œì„ (SNES, NES ë“±)

### **ê²Œì„ ì¶”ê°€ ë°©ë²•**

#### **SNES ê²Œì„ ì¶”ê°€**
1. ROM íŒŒì¼ì„ [frontend/public/games/](mdc:frontend/public/games)ì— ë°°ì¹˜
2. [frontend/src/components/GameSelector.tsx](mdc:frontend/src/components/GameSelector.tsx)ì— ê²Œì„ ì„¤ì • ì¶”ê°€
3. ìë™ìœ¼ë¡œ EmulatorJSì—ì„œ ì¸ì‹

#### **DOS ê²Œì„ ì¶”ê°€**
1. ZIP íŒŒì¼ì„ [unchartedwaters2/static/game/](mdc:unchartedwaters2/static/game)ì— ë°°ì¹˜
2. [unchartedwaters2/src/components/Splash.tsx](mdc:unchartedwaters2/src/components/Splash.tsx)ì— ê²Œì„ ì„¤ì • ì¶”ê°€
3. js-dosì—ì„œ ìë™ ì¶”ì¶œ ë° ì‹¤í–‰

## ğŸ› ï¸ **ê°œë°œ ì‹œ ì£¼ì˜ì‚¬í•­**

### **1. íŒŒì¼ ìˆ˜ì • ì „ ê¶Œí•œ í™•ì¸**
```bash
# íŒŒì¼ ê¶Œí•œ í™•ì¸ í•„ìˆ˜
ls -la [íŒŒì¼ê²½ë¡œ]

# root ì†Œìœ  íŒŒì¼ì¼ ê²½ìš° ê¶Œí•œ ë³€ê²½
sudo chown purestory:purestory [íŒŒì¼ê²½ë¡œ]
```

### **2. nginx ì„¤ì • ìˆ˜ì • ì‹œ**
- **ë°±ì—… ìƒì„±**: [tmp/](mdc:tmp)ì— í¸ì§‘ìš© íŒŒì¼ ìƒì„±
- **ë³€ê²½ì‚¬í•­ í™•ì¸**: diff ëª…ë ¹ìœ¼ë¡œ ì‹¤ì œ ë³€ê²½ ì—¬ë¶€ í™•ì¸
- **ì„¤ì • ê²€ì¦**: `nginx -t`ë¡œ ê²€ì¦ í›„ ì ìš©

### **3. ë¹Œë“œ í›„ ë°°í¬**
```bash
# Frontend ë¹Œë“œ
cd frontend && npm run build

# nginx reloadëŠ” ì„¤ì • ë³€ê²½ ì‹œì—ë§Œ!
# ë‹¨ìˆœ ë¹Œë“œëŠ” ì •ì  íŒŒì¼ë§Œ êµì²´ë˜ë¯€ë¡œ reload ë¶ˆí•„ìš”
```

## ğŸ”§ **íŠ¸ëŸ¬ë¸”ìŠˆíŒ…**

### **ê°œë°œ ì„œë²„ í¬íŠ¸ ì¶©ëŒ**
- ViteëŠ” ìë™ìœ¼ë¡œ ë‹¤ë¥¸ í¬íŠ¸ ì°¾ê¸° (3001, 3002 ë“±)
- íŠ¹ì • í¬íŠ¸ ì§€ì •: `--port 4000`

### **TypeScript ì—ëŸ¬**
- Node.js íƒ€ì…: `@types/node@^20.0.0` ì‚¬ìš©
- ëª¨ë“ˆ í•´ì„: `moduleResolution: "node"` ì„¤ì •

### **ê²Œì„ ë¡œë”© ì‹¤íŒ¨**
- ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ ì½˜ì†” í™•ì¸
- ë„¤íŠ¸ì›Œí¬ íƒ­ì—ì„œ íŒŒì¼ ë‹¤ìš´ë¡œë“œ ìƒíƒœ í™•ì¸
- IndexedDB ìºì‹œ í™•ì¸

## ğŸ“ **ì½”ë”© ìŠ¤íƒ€ì¼**

### **React ì»´í¬ë„ŒíŠ¸**
- í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ ì‚¬ìš©
- Hooks ì ê·¹ í™œìš© (useState, useEffect, useCallback)
- TypeScript íƒ€ì… ì •ì˜ í•„ìˆ˜

### **íŒŒì¼ ëª…ëª… ê·œì¹™**
- ì»´í¬ë„ŒíŠ¸: PascalCase (GameSelector.tsx)
- ìœ í‹¸ë¦¬í‹°: camelCase (create-dos.ts)
- íƒ€ì… ì •ì˜: interfaces.ts

### **ì„±ëŠ¥ ê³ ë ¤ì‚¬í•­**
- useCallbackìœ¼ë¡œ í•¨ìˆ˜ ë©”ëª¨ì´ì œì´ì…˜
- useMemoë¡œ ê°’ ë©”ëª¨ì´ì œì´ì…˜
- ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ ë°©ì§€

## ğŸš¨ **ì ˆëŒ€ ê¸ˆì§€ì‚¬í•­**

1. **ê°œë°œ ì„œë²„ ë¬´ë¶„ë³„ ì‹¤í–‰**: ì´ë¯¸ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸ í›„ ì‹¤í–‰
2. **nginx ë¬´ì˜ë¯¸í•œ reload**: ì„¤ì • ë³€ê²½ ì—†ì´ reload ê¸ˆì§€
3. **ê¶Œí•œ í™•ì¸ ì—†ì´ íŒŒì¼ ìˆ˜ì •**: í•­ìƒ ls -laë¡œ ê¶Œí•œ í™•ì¸
4. **ì§ì ‘ í”„ë¡œë•ì…˜ ìˆ˜ì •**: ë°˜ë“œì‹œ [tmp/](mdc:tmp)ì—ì„œ í¸ì§‘ í›„ ì ìš©
5. **ìºì‹œ ë¬´ì‹œ**: ê²Œì„ ìºì‹± ì‹œìŠ¤í…œ í™œìš© í•„ìˆ˜

---

**âš¡ ë¹ ë¥´ê³  ì•ˆì •ì ì¸ ê²Œì„ ê²½í—˜ì„ ìœ„í•œ í•„ìˆ˜ ê°€ì´ë“œë¼ì¸**
